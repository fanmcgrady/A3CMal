import subprocess
import p
import os

data_path = p.DATASET_PATH
opcode_path = p.OP_TRAIN
jump_path = p.JUMP_TRAIN
jump_map_path = p.JUMP_MAP_PATH

cmd = 'mkdir ' + ' '.join([opcode_path, jump_path, jump_map_path])
subprocess.call(cmd, shell=True)

cmd = 'python get_ins.py xid_train.p ' + ' '.join([data_path + '/train', opcode_path])
#subprocess.call(cmd, shell=True)

cmd = 'python get_jump.py xid_train.p ' + ' '.join([opcode_path, jump_path])
#subprocess.call(cmd, shell=True)

cmd = 'python get_jump_map.py xid_train.p ' + ' '.join([data_path + '/train', jump_path, jump_map_path])
#subprocess.call(cmd, shell=True)

cmd = 'python find_new_ins.py xid_train.p ' + ' '.join([opcode_path, jump_map_path])
#subprocess.call(cmd, shell=True)

cmd = 'python filtcmd.py'
#subprocess.call(cmd, shell=True)

cmd = 'python find_2g.py xid_train.p ' + data_path + '/train'
#subprocess.call(cmd, shell=True)

cmd = 'python find_3g.py xid_train.p ' + data_path + '/train'
#subprocess.call(cmd, shell=True)

cmd = 'python cut3g.py'
#subprocess.call(cmd, shell=True)

cmd = 'python cut3g_for_4g.py'
#subprocess.call(cmd, shell=True)

cmd = 'python find_4g.py xid_train.p ' + data_path + '/train'
#subprocess.call(cmd, shell=True)

cmd = 'python cut4g.py'
#subprocess.call(cmd, shell=True)

cmd = 'python findhead.py xid_train.p ' + data_path + '/train'
#subprocess.call(cmd, shell=True)

cmd = 'python rebuild_2g3g4ghead.py xid_train.p ' + data_path + '/train'
subprocess.call(cmd, shell=True)

# cmd = 'python rebuild_2g3g4ghead.py xid_test.p ' + data_path + '/test'
# subprocess.call(cmd, shell=True)

cmd = 'python getfea.py'
#subprocess.call(cmd, shell=True)
