import pickle
import sys

xid = pickle.load(open(sys.argv[1], 'rb'))
# unconditional_jump=['jmp','j','ja']
ins_path = sys.argv[2]
jump_path = sys.argv[3]

for cc, i in enumerate(xid):
    jmp = {}
    tmp = pickle.load(open(ins_path + '/' + i + '.ins.p', 'rb'))
    for add in tmp:
        if tmp[add] == b'jmp' or tmp[add] == b'ja':
            jmp[add] = 1
    del tmp
    # {'add of jmp': 1, 'add of ja': 1} or {} or {'add of jum': 1} or {'add of ja': 1}
    pickle.dump(jmp, open(jump_path + '/' + i + '.jmp.p', 'wb'))
    del jmp

    print(cc * 1.0 / len(xid))
